<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>d3 selection</title>
        <script src="https://cdn.bootcss.com/d3/5.9.2/d3.min.js"></script>
    </head>
    <body>
        <script>
            var data = [
                { x: 120, y: 50 },
                { x: 140, y: 70 },
                { x: 160, y: 90 },
                { x: 180, y: 110 },
                { x: 200, y: 130 },
                { x: 220, y: 150 },
                { x: 240, y: 170 },
                { x: 260, y: 190 },
                { x: 280, y: 210 },
            ];

            const getRandomInt = max => Math.floor(Math.random() * Math.floor(max));

            d3.select('body')
                .append('svg')
                .attr('width', '100vw')
                .attr('height', '100vh')
                .selectAll('rect')
                .data(data) // TODO: .data() 如何实现数据自动解析的呢 ?
                .enter()
                .append('rect')
                .attr('width', function(d) {
                    return d.x;
                })
                .attr('height', function(d) {
                    return d.y;
                })
                .attr('x', function(d) {
                    return d.x * 3;
                })
                .attr('y', function(d) {
                    return d.x * 3;
                })
                .attr('fill', function(d) {
                    const R = getRandomInt(255);
                    const G = getRandomInt(255);
                    const B = getRandomInt(255);
                    const alpha = d.x / 1000;
                    return `rgb(${R},${G},${B},${alpha})`;
                });
        </script>
    </body>
</html>
